<!DOCTYPE html>
<html>
<head>
<title> Dale Barrie basic snake test</title>
<script src="javascript/jquery-3.2.1.min.js"></script>
<script src="javascript/jquery.hotkeys.js"></script>
<script src="javascript/key_status.js"></script>

</head>
<body>
<h1>Dale Barrie basic snake test</h1>

<canvas id="snakeMap" width="450" height="450" style="border:1px solid #000000;"></canvas>

<div id="score">
<h3> your score is 0</h3>
</div>

<script>
var canvas = document.getElementById("snakeMap");
var CANVAS_WIDTH = 450;
var CANVAS_HEIGHT = 450;

var scale = 10;
var lastPressed = "up";
var score = 0;

var ctx = canvas.getContext("2d");


ctx.fillRect(0, 0, CANVAS_HEIGHT, CANVAS_WIDTH); 

var FPS = 20;
setInterval(function(){
update();
draw();
}, 1000/FPS);

function update(){

if(lastPressed == "up"){
	snake.y -= scale;
}
if(keydown.up){
	lastPressed = "up";
}

if(lastPressed == "down"){
	snake.y += scale;
}
if(keydown.down){
lastPressed = "down";
}

if(lastPressed == "left"){
	snake.x -= scale;
}
if(keydown.left){
lastPressed = "left"
}

if(lastPressed == "right"){
	snake.x += scale;
}
if(keydown.right){
lastPressed = "right";
}

	
inBorder();

eatFood();

}

function draw(){
ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
 snake.draw();
 
 food.draw();
}

var snake = {
	color: "#00FF00",
	chunks: 1,
	width: 1 * scale,
	height: 1 * scale,
	x: 220,
	y: 380,
	draw: function(){
		ctx.fillStyle = this.color;
		ctx.fillRect(this.x, this.y, this.width, this.height);
	}
}

var food = {
	active: true,
	color: " #F00",
	x: (Math.floor((Math.random() * 45) + 0)) * scale,
	y: (Math.floor((Math.random() * 45) + 0)) * scale,
	draw: function(){
		ctx.fillStyle = this.color;
		ctx.fillRect(this.x, this.y, scale, scale);	
	},
	explode: function(){
			score ++;
			this.active = false;
		}
}

function die(){
console.log("you died");
lastPressed = "dead";
}

function inBorder(){
 if (snake.x >= (CANVAS_WIDTH - scale) || snake.x <= (0) || snake.y >= (CANVAS_HEIGHT - scale) || snake.y <= (0)){
	die();
 }
}

function eatFood(){
if((snake.x == food.x) && (snake.y == food.y)){
	console.log("eat");
	food.explode();
}
}

</script>
</body>
</html>